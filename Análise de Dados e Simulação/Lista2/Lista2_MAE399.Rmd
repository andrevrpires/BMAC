---
title: "Lista2_MAE399"
author: "Grupo de Estatística"
output: pdf_document
---

##__**Questão 1**__

Apresente uma tabela com os percentis 1 %, 25 %, 50 %, 75 % e 99 % para os da-
dos referentes a variável trip duration da cidade de Nova York nos meses de
março de 2018 até fevereiro 2019. Para todas as questões abaixo, considere ape-
nas as viagens cujos valores para a variável trip duration estão entre os percentis
1 % e 99 %.

Como os dados são muitos, vamos analisá-los mês a mês.

Tabela para março de 2018:
```{r}
vector <- 201803:201812
vector <- c(vector, 201901:201902)
startstring <- "https://s3.amazonaws.com/tripdata/"
endstring <- "-citibike-tripdata.csv.zip"
urlsvector <- paste(startstring, vector, endstring, sep = "")

n <- 1

for(eachurl in urlsvector){
  
        bikeurl <- eachurl
        unzippedfile <- paste(vector[n], "csv", sep = ".")
        if (!file.exists(unzippedfile))
        {
                destfile <- paste(vector[n], "csv.zip", sep = ".")
                if (!file.exists(destfile))
                {
                        download.file(bikeurl,
                                      destfile = destfile,
                                      method = "curl")
                        downloadtime <- date()
                }
                unzip(destfile)
        }
        n <- n + 1
}
        
dadosbike <- read.csv(unzippedfile)
  
}
tabela03_2018 <- data.table::data.table(read.csv("201803-citibike-tripdata.csv"))
quantile(tabela03_2018$tripduration, probs = c(0.01, 0.25, 0.5, 0.75, 0.99))
rm(tabela03_2018)
```
Tabela para abril de 2018:
```{r}
tabela04_2018 <- data.table::data.table(read.csv("201804-citibike-tripdata.csv"))
quantile(tabela04_2018$tripduration, probs = c(0.01, 0.25, 0.5, 0.75, 0.99))
rm(tabela04_2018)
```
Tabela para maio de 2018:
```{r}
tabela05_2018 <- data.table::data.table(read.csv("201805-citibike-tripdata.csv"))
quantile(tabela05_2018$tripduration, probs = c(0.01, 0.25, 0.5, 0.75, 0.99))
rm(tabela05_2018)
```
Tabela para junho de 2018:
```{r}
tabela06_2018 <- data.table::data.table(read.csv("201806-citibike-tripdata.csv"))
quantile(tabela06_2018$tripduration, probs = c(0.01, 0.25, 0.5, 0.75, 0.99))
rm(tabela06_2018)
```
Tabela para julho de 2018:
```{r}
tabela07_2018 <- data.table::data.table(read.csv("201807-citibike-tripdata.csv"))
quantile(tabela07_2018$tripduration, probs = c(0.01, 0.25, 0.5, 0.75, 0.99))
rm(tabela07_2018)
```
Tabela para agosto de 2018:
```{r}
tabela08_2018 <- data.table::data.table(read.csv("201808-citibike-tripdata.csv"))
quantile(tabela08_2018$tripduration, probs = c(0.01, 0.25, 0.5, 0.75, 0.99))
rm(tabela08_2018)
```
Tabela para setembro de 2018:
```{r}
tabela09_2018 <- data.table::data.table(read.csv("201809-citibike-tripdata.csv"))
quantile(tabela09_2018$tripduration, probs = c(0.01, 0.25, 0.5, 0.75, 0.99))
rm(tabela09_2018)
```
Tabela para outubro de 2018:
```{r}
tabela10_2018 <- data.table::data.table(read.csv("201810-citibike-tripdata.csv"))
quantile(tabela10_2018$tripduration, probs = c(0.01, 0.25, 0.5, 0.75, 0.99))
rm(tabela10_2018)
```
Tabela para novembro de 2018:
```{r}
tabela11_2018 <- data.table::data.table(read.csv("201811-citibike-tripdata.csv"))
quantile(tabela11_2018$tripduration, probs = c(0.01, 0.25, 0.5, 0.75, 0.99))
rm(tabela11_2018)
```
Tabela para dezembro de 2018:
```{r}
tabela12_2018 <- data.table::data.table(read.csv("201812-citibike-tripdata.csv"))
quantile(tabela12_2018$tripduration, probs = c(0.01, 0.25, 0.5, 0.75, 0.99))
rm(tabela12_2018)
```
Tabela para janeiro de 2019:
```{r}
tabela01_2019 <- data.table::data.table(read.csv("201901-citibike-tripdata.csv"))
quantile(tabela01_2019$tripduration, probs = c(0.01, 0.25, 0.5, 0.75, 0.99))
rm(tabela01_2019)
```
Tabela para fevereiro de 2019:
```{r}
tabela02_2019 <- data.table::data.table(read.csv("201902-citibike-tripdata.csv"))
quantile(tabela02_2019$tripduration, probs = c(0.01, 0.25, 0.5, 0.75, 0.99))
rm(tabela02_2019)
```

##__**Questão 2**__

Apresente uma tabela com as quantidades de bicicletas usadas e com as porcen-
tagem do tempo de uso das bicicletas (dentro dos meses em questão). Considere
apenas as bicicletas que foram usadas pelo menos uma vez durante cada mês.


##__**Questão 3**__

Apresente uma tabela com as top 5 bicicletas em termos de tempo de uso (com
indicação do tempo de uso por cada bicicleta).

Tabela para março de 2018
```{r}
tabela03_2018 <- data.table::data.table(read.csv("201803-citibike-tripdata.csv"))
tabela03_2018[order(tabela03_2018$tripduration, decreasing = c(TRUE)), c(1:5)]
rm(tabela03_2018)
```
Tabela para abril de 2018
```{r}
tabela04_2018 <- data.table::data.table(read.csv("201804-citibike-tripdata.csv"))
tabela04_2018[order(tabela04_2018$tripduration, decreasing = c(TRUE)), c(1:5)]
rm(tabela04_2018)
```
Tabela para maio de 2018
```{r}
tabela05_2018 <- data.table::data.table(read.csv("201805-citibike-tripdata.csv"))
tabela05_2018[order(tabela05_2018$tripduration, decreasing = c(TRUE)), c(1:5)]
rm(tabela05_2018)
```
Tabela para junho de 2018
```{r}
tabela06_2018 <- data.table::data.table(read.csv("201806-citibike-tripdata.csv"))
tabela06_2018[order(tabela06_2018$tripduration, decreasing = c(TRUE)), c(1:5)]
rm(tabela06_2018)
```
Tabela para julho de 2018
```{r}
tabela07_2018 <- data.table::data.table(read.csv("201807-citibike-tripdata.csv"))
tabela07_2018[order(tabela07_2018$tripduration, decreasing = c(TRUE)), c(1:5)]
rm(tabela07_2018)
```
Tabela para agosto de 2018
```{r}
tabela08_2018 <- data.table::data.table(read.csv("201808-citibike-tripdata.csv"))
tabela08_2018[order(tabela08_2018$tripduration, decreasing = c(TRUE)), c(1:5)]
rm(tabela08_2018)
```
Tabela para setembro de 2018
```{r}
tabela09_2018 <- data.table::data.table(read.csv("201809-citibike-tripdata.csv"))
tabela09_2018[order(tabela09_2018$tripduration, decreasing = c(TRUE)), c(1:5)]
rm(tabela09_2018)
```
Tabela para outubro de 2018
```{r}
tabela10_2018 <- data.table::data.table(read.csv("201810-citibike-tripdata.csv"))
tabela10_2018[order(tabela10_2018$tripduration, decreasing = c(TRUE)), c(1:5)]
rm(tabela10_2018)
```
Tabela para novembro de 2018
```{r}
tabela11_2018 <- data.table::data.table(read.csv("201811-citibike-tripdata.csv"))
tabela11_2018[order(tabela11_2018$tripduration, decreasing = c(TRUE)), c(1:5)]
rm(tabela11_2018)
```
Tabela para dezembro de 2018
```{r}
tabela12_2018 <- data.table::data.table(read.csv("201812-citibike-tripdata.csv"))
tabela12_2018[order(tabela12_2018$tripduration, decreasing = c(TRUE)), c(1:5)]
rm(tabela12_2018)
```
Tabela para janeiro de 2019
```{r}
tabela01_2019 <- data.table::data.table(read.csv("201901-citibike-tripdata.csv"))
tabela01_2019[order(tabela01_2019$tripduration, decreasing = c(TRUE)), c(1:5)]
rm(tabela01_2019)
```
Tabela para fevereiro de 2019
```{r}
tabela02_2019 <- data.table::data.table(read.csv("201902-citibike-tripdata.csv"))
tabela02_2019[order(tabela02_2019$tripduration, decreasing = c(TRUE)), c(1:5)]
rm(tabela02_2019)
```

